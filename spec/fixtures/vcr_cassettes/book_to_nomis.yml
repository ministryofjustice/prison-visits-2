---
http_interactions:
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/lookup/active_offender?date_of_birth=1979-04-23&noms_id=A1475AE
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:41 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=4, db=3
      Url-Template:
      - "/lookup/active_offender"
      Content-Length:
      - '40'
    body:
      encoding: ASCII-8BIT
      string: '{"found":true,"offender":{"id":1057027}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:41 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/unavailability?dates=2018-05-25
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:41 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=48, db=48
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '96'
    body:
      encoding: ASCII-8BIT
      string: '{"2018-05-25":{"external_movement":false,"existing_visits":[],"out_of_vo":false,"banned":false}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:41 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/prison/LEI/slots?end_date=2018-05-25&start_date=2018-05-25
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:41 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=83, db=83
      Url-Template:
      - "/prison/{prison_id}"
      Content-Length:
      - '417'
    body:
      encoding: ASCII-8BIT
      string: '{"slots":[{"time":"2018-05-25T10:00\/11:30","capacity":50,"max_groups":3,"max_adults":6,"groups_booked":0,"visitors_booked":0,"adults_booked":0},{"time":"2018-05-25T14:00\/15:00","capacity":50,"max_groups":3,"max_adults":6,"groups_booked":0,"visitors_booked":0,"adults_booked":0},{"time":"2018-05-25T15:30\/16:30","capacity":50,"max_groups":8,"max_adults":50,"groups_booked":0,"visitors_booked":0,"adults_booked":0}]}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:41 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/restrictions
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:41 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=9, db=9
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '215'
    body:
      encoding: ASCII-8BIT
      string: '{"restrictions":[{"type":{"code":"BAN","desc":"Banned"},"effective_date":"2016-04-03","expiry_date":"2016-04-04"},{"type":{"code":"CLOSED","desc":"Closed"},"effective_date":"2016-04-03","expiry_date":"2018-04-27"}]}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:41 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/contact_list
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:41 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=3, db=3
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '531'
    body:
      encoding: ASCII-8BIT
      string: '{"contacts":[{"id":13621,"given_name":"BOB","surname":"LIPMAN","date_of_birth":"1970-01-01","gender":{"code":"M","desc":"Male"},"relationship_type":{"code":"HUS","desc":"Husband"},"contact_type":{"code":"S","desc":"Social/
        Family"},"approved_visitor":true,"active":true,"restrictions":[]},{"id":13668,"given_name":"e","surname":"e","gender":{},"relationship_type":{"code":"COM","desc":"Case
        Admin (Offender Management Unit)"},"contact_type":{"code":"O","desc":"Official"},"approved_visitor":false,"active":true,"restrictions":[]}]}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:41 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/A1475AE/location
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:42 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=52, db=52
      Url-Template:
      - "/offenders/{noms_id}"
      Content-Length:
      - '202'
    body:
      encoding: ASCII-8BIT
      string: '{"establishment":{"code":"LEI","desc":"LEEDS (HMP)"},"housing_location":{"description":"LEI-H-2-006","levels":[{"type":"Wing","value":"H"},{"type":"Landing","value":"2"},{"type":"Cell","value":"006"}]}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:42 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/A1475AE
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 0bd785a9-7c48-4d45-ba27-2585a8771959
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:42 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=5, db=5
      Url-Template:
      - "/offenders/{noms_id}"
      Content-Length:
      - '352'
    body:
      encoding: ASCII-8BIT
      string: '{"given_name":"MARGARET","surname":"LIPMAN","date_of_birth":"1979-04-23","aliases":[],"gender":{"code":"F","desc":"Female"},"convicted":true,"pnc_number":"PNC/A1475AE","imprisonment_status":{"code":"SENT03","desc":"Adult
        Imprisonment Without Option CJA03"},"iep_level":{"code":"STD","desc":"Standard"},"security_category":{"code":"U","desc":"Unclass"}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:42 GMT
- request:
    method: post
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/booking
    body:
      encoding: UTF-8
      string: '{"lead_contact":13621,"other_contacts":[],"slot":"2018-05-25T10:00/11:30","override_offender_restrictions":false,"override_visitor_restrictions":false,"override_vo_balance":false,"override_slot_capacity":false,"client_unique_ref":"d6cf9342-e071-44d7-a8fc-527a7ddd3142"}'
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - acc0b3b1-5462-4a58-83d3-aaab03134196
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:43 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=174, db=174
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '101'
    body:
      encoding: ASCII-8BIT
      string: '{"visit_id":5984,"visit_order":{"number":2018000000157,"type":{"code":"VO","desc":"Visiting
        Order"}}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:43 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/lookup/active_offender?date_of_birth=1979-04-23&noms_id=A1475AE
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - d86275a5-b4b2-48e8-8d5d-641f13f6b10c
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:44 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=3, db=1
      Url-Template:
      - "/lookup/active_offender"
      Content-Length:
      - '40'
    body:
      encoding: ASCII-8BIT
      string: '{"found":true,"offender":{"id":1057027}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:44 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/contact_list
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - d86275a5-b4b2-48e8-8d5d-641f13f6b10c
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:44 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=2, db=2
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '531'
    body:
      encoding: ASCII-8BIT
      string: '{"contacts":[{"id":13621,"given_name":"BOB","surname":"LIPMAN","date_of_birth":"1970-01-01","gender":{"code":"M","desc":"Male"},"relationship_type":{"code":"HUS","desc":"Husband"},"contact_type":{"code":"S","desc":"Social/
        Family"},"approved_visitor":true,"active":true,"restrictions":[]},{"id":13668,"given_name":"e","surname":"e","gender":{},"relationship_type":{"code":"COM","desc":"Case
        Admin (Offender Management Unit)"},"contact_type":{"code":"O","desc":"Official"},"approved_visitor":false,"active":true,"restrictions":[]}]}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:44 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/lookup/active_offender?date_of_birth=1979-04-23&noms_id=A1475AE
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 9269c6a1-6236-4950-8b54-4e8da100c9ee
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:44 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=2, db=1
      Url-Template:
      - "/lookup/active_offender"
      Content-Length:
      - '40'
    body:
      encoding: ASCII-8BIT
      string: '{"found":true,"offender":{"id":1057027}}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:44 GMT
- request:
    method: get
    uri: https://noms-api-dev.dsd.io/nomisapi/offenders/1057027/visits/contact_list
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - excon/0.62.0
      Accept:
      - application/json
      Authorization:
      - authorisation_header
      X-Request-Id:
      - 9269c6a1-6236-4950-8b54-4e8da100c9ee
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Mon, 21 May 2018 10:08:45 GMT
      Server:
      - nginx/1.13.8
      Server-Timing:
      - total=3, db=3
      Url-Template:
      - "/offenders/{offender_id}/visits"
      Content-Length:
      - '531'
    body:
      encoding: ASCII-8BIT
      string: '{"contacts":[{"id":13621,"given_name":"BOB","surname":"LIPMAN","date_of_birth":"1970-01-01","gender":{"code":"M","desc":"Male"},"relationship_type":{"code":"HUS","desc":"Husband"},"contact_type":{"code":"S","desc":"Social/
        Family"},"approved_visitor":true,"active":true,"restrictions":[]},{"id":13668,"given_name":"e","surname":"e","gender":{},"relationship_type":{"code":"COM","desc":"Case
        Admin (Offender Management Unit)"},"contact_type":{"code":"O","desc":"Official"},"approved_visitor":false,"active":true,"restrictions":[]}]}'
    http_version: 
  recorded_at: Mon, 21 May 2018 10:08:45 GMT
recorded_with: VCR 4.0.0
