<form class="js-SubmitOnce no-form-group js-EmailPreview" id="process_visit" action="" accept-charset="UTF-8" method="post">

  <div class="grid-row push-top">
    <div class="column-one-half">
      <div class="font-small text-secondary">Visit ID: T9F3P0H9</div>
      <h1 class="bold-large float-left">Check visit request</h1>
    </div>
    <div class="column-one-half">
      <div class="grid-row">
        <div class="column-two-thirds">
          <div class="tag tag--requested tag--heading">Requested: <br>18/09/2017 - 14:28</div>
        </div>
      </div>
    </div>
  </div>

  <div class="prisoner-details">
    <hr>
    <h2 class="bold-medium">Prisoner details</h2>
    <div class="notice push-top">
      <i class="icon icon-information">
      <span class="visuallyhidden">Warning</span>
      </i>
      <strong class="bold-small">The prisoner date of birth and number have been verified. <br>Please check the prisoner name.</strong>
    </div>
    <div class="grid-row push-top">
      <div class="column-one-quarter">
        <span class="text-secondary">Prisoner name</span>
        <div class="bold-small">Dave Smith</div>
      </div>
      <div class="column-one-quarter">
        <span class="text-secondary">Prisoner D.O.B</span>
        <div class="bold-small">11/11/1971</div>
        <div class="tag tag--booked font-xsmall">Verified</div>
      </div>
      <div class="column-one-quarter">
        <span class="text-secondary">Prisoner no.</span>
        <div class="bold-small">A1484AE</div>
        <div class="font-xsmall tag tag--booked">Verified</div>
      </div>
      <div class="column-one-quarter">
        <span class="text-secondary">Prison name</span>
        <div class="bold-small">Pentonville</div>
      </div>
    </div>
  </div>

  <hr>

  <h2 class="bold-medium">Visit date</h2>
  <div class="grid-row push-top choose-date">
    <div class="form-group">
      <div class="column-one-third">
        <label class="disabled" data-target="selected_slot_details" for="visit_slot_granted_2017-05-13t09151115"><input disabled="disabled" class="js-Conditional" data-conditional-el="selected_slot_details" data-conditional-val="slot_option_0,slot_option_1,slot_option2" type="radio" value="2017-05-13T09:15/11:15" name="visit[slot_granted]" id="visit_slot_granted_2017-05-13t09151115" aria-controls="selected_slot_details"><span class="date-box__number">1</span><span class="date-box__day">Saturday</span><br>13 May 2017 <br>09:15–11:15
        </label>
      </div>
      <div class="column-one-third">
        <label class="selected" data-target="selected_slot_details" for="visit_slot_granted_2017-05-27t09151115"><input class="js-Conditional js-closedRestriction" data-conditional-el="selected_slot_details" data-conditional-val="slot_option_0,slot_option_1,slot_option2" type="radio" value="2017-05-27T09:15/11:15" name="visit[slot_granted]" id="visit_slot_granted_2017-05-27t09151115" aria-controls="selected_slot_details"><span class="date-box__number">2</span><span class="date-box__day">Saturday</span><br>27 May 2017 <br>09:15–11:15
        </label><span class="date-box__message bold-xsmall tag tag--verified">Prisoner available</span>
      </div>
      <div class="column-one-third">
        <label class="" data-target="selected_slot_details" for="visit_slot_granted_2017-05-20t14001600"><input class="js-Conditional" data-conditional-el="selected_slot_details" data-conditional-val="slot_option_0,slot_option_1,slot_option2" type="radio" value="2017-05-20T14:00/16:00" name="visit[slot_granted]" id="visit_slot_granted_2017-05-20t14001600" aria-controls="selected_slot_details"><span class="date-box__number">3</span><span class="date-box__day">Saturday</span><br>20 May 2017 <br>14:00–16:00
        </label><span class="date-box__message bold-xsmall tag tag--verified">Prisoner available</span>
      </div>
    </div>
    <div class="column-two-thirds push-top push-bottom--half">
      <div class="form-group">
        <label class="block-label">
        <input class="js-Conditional js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out" type="radio" value="slot_unavailable" name="visit[slot_granted]" id="visit_slot_granted_slot_unavailable">
        None of the chosen times are available
        </label>
      </div>
    </div>
  </div>
  <div class="js-clearRadioButtons">
    <a href="#" class="js-clearRadioButton" data-target="visit[slot_granted]">Clear selection</a>
  </div>

  <hr>

  <h2 class="bold-medium">Visitor details</h2>
  <p>Match each visitor to a name on the prisoner’s contact list.</p>
  <div id="visitors-fixture" class="js-visitorList nomis-enabled" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
    <ul class="visitor-contact-list push-top">
      <li id="visitor_d0482cf9-7bea-4453-b3be-d6b45e3cc951" data-visitor="{&quot;first_name&quot;: &quot;Tom&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;dob&quot;: &quot;1970-01-01&quot;}" data-processed="false">
        <div class="wrapper">
          <div class="column">
            <div class="name">
              <input type="hidden" value="d0482cf9-7bea-4453-b3be-d6b45e3cc951" name="visit[visitors_attributes][0][id]" id="visit_visitors_attributes_0_id">
              <span class="bold-small">Tom Smith</span> - 01/01/1970
              <span class="font-small">(47)</span>
            </div>
            <p>
              <a href="mailto:tom@example.com">tom@example.com</a>
              <br>
              1234567890
            </p>
          </div>
          <div class="column">
            <div class="form-group js-matchVisitor--select">
              <label for="visit_visitors_attributes_0_nomis_id" class="form-label">Match to contact list</label>
              <select class="form-control js-contactList" name="visit[visitors_attributes][0][nomis_id]" id="visit_visitors_attributes_0_nomis_id">
                <option value="">Please select a contact</option>
                <option data-contact="{
                  &quot;id&quot;:&quot;12588&quot;,
                  &quot;banned&quot;: &quot;true&quot;
                  }" value="12588" selected>
                  BILLY JONES - 01/01/1970
                </option>
                <option data-contact="{
                  &quot;id&quot;:&quot;13428&quot;,
                  &quot;banned&quot;: &quot;false&quot;
                  }" value="13428">
                  IRMA ITSU - 03/04/1975
                </option>
              </select>
            </div>
            <label class="form-group" for="visit_visitors_attributes_0_not_on_list">
            <input name="visit[visitors_attributes][0][not_on_list]" type="hidden" value="0"><input data-checkbox-summary-text="Tom S" type="checkbox" value="1" name="visit[visitors_attributes][0][not_on_list]" id="visit_visitors_attributes_0_not_on_list">
            Not on contact list
            </label>
            <label class="form-group" for="visit_visitors_attributes_0_banned">
            <input name="visit[visitors_attributes][0][banned]" type="hidden" value="0">
            <input type="checkbox" value="1" name="visit[visitors_attributes][0][banned]" id="visit_visitors_attributes_0_banned">
            Visitor is banned
            </label>
          </div>
        </div>
      </li>
      <li id="visitor_f1f7b645-c57f-4926-bfba-a29e4e45542e" data-visitor="{&quot;first_name&quot;: &quot;Jane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;dob&quot;: &quot;1999-01-01&quot;}">
        <div class="wrapper">
          <div class="column">
            <div class="name">
              <input type="hidden" value="f1f7b645-c57f-4926-bfba-a29e4e45542e" name="visit[visitors_attributes][1][id]" id="visit_visitors_attributes_1_id">
              <span class="bold-small">Jane Smith</span> - 01/01/1999
              <span class="font-small">(18)</span>
            </div>
          </div>
          <div class="column">
            <div class="form-group js-matchVisitor--select">
              <label for="visit_visitors_attributes_1_nomis_id" class="form-label">Match to contact list</label>
              <select class="form-control js-contactList" name="visit[visitors_attributes][1][nomis_id]" id="visit_visitors_attributes_1_nomis_id">
                <option value="">Please select a contact</option>
                <option data-contact="{
                  &quot;id&quot;:&quot;12588&quot;,
                  &quot;banned&quot;: &quot;true&quot;
                  }" value="12588">
                  BILLY JONES - 01/01/1970
                </option>
                <option data-contact="{
                  &quot;id&quot;:&quot;13428&quot;,
                  &quot;banned&quot;: &quot;false&quot;
                  }" value="13428">
                  IRMA ITSU - 03/04/1975
                </option>
              </select>
            </div>
            <label class="form-group" for="visit_visitors_attributes_1_not_on_list">
            <input name="visit[visitors_attributes][1][not_on_list]" type="hidden" value="0"><input data-checkbox-summary-text="Jane S" type="checkbox" value="1" name="visit[visitors_attributes][1][not_on_list]" id="visit_visitors_attributes_1_not_on_list">
            Not on contact list
            </label>      <label class="form-group" for="visit_visitors_attributes_1_banned">
            <input name="visit[visitors_attributes][1][banned]" type="hidden" value="0"><input type="checkbox" value="1" name="visit[visitors_attributes][1][banned]" id="visit_visitors_attributes_1_banned">
            Visitor is banned
            </label>
          </div>
        </div>
      </li>
      <li id="visitor_8fe3312c-a83d-4785-b438-4b039f3c8640" data-visitor="{&quot;first_name&quot;: &quot;Shane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;dob&quot;: &quot;1980-03-01&quot;}">
        <div class="wrapper">
          <div class="column">
            <div class="name">
              <input type="hidden" value="8fe3312c-a83d-4785-b438-4b039f3c8640" name="visit[visitors_attributes][2][id]" id="visit_visitors_attributes_2_id">
              <span class="bold-small">Shane Smith</span> - 01/03/1980
              <span class="font-small">(37)</span>
            </div>
          </div>
          <div class="column">
            <div class="form-group">
              <label for="visit_visitors_attributes_2_nomis_id" class="form-label">Match to contact list</label>
              <select class="form-control js-contactList" name="visit[visitors_attributes][2][nomis_id]" id="visit_visitors_attributes_2_nomis_id">
                <option value="">Please select a contact</option>
                <option data-contact="{
                  &quot;id&quot;:&quot;12588&quot;,
                  &quot;banned&quot;: &quot;true&quot;
                  }" value="12588">
                  BILLY JONES - 01/01/1970
                </option>
                <option data-contact="{
                  &quot;id&quot;:&quot;13428&quot;,
                  &quot;banned&quot;: &quot;false&quot;
                  }" value="13428">
                  IRMA ITSU - 03/04/1975
                </option>
              </select>
            </div>
            <label class="form-group" for="visit_visitors_attributes_2_not_on_list">
            <input name="visit[visitors_attributes][2][not_on_list]" type="hidden" value="0"><input data-checkbox-summary-text="Shane S" type="checkbox" value="1" name="visit[visitors_attributes][2][not_on_list]" id="visit_visitors_attributes_2_not_on_list">
            Not on contact list
            </label>      <label class="form-group" for="visit_visitors_attributes_2_banned">
            <input name="visit[visitors_attributes][2][banned]" type="hidden" value="0"><input type="checkbox" value="1" name="visit[visitors_attributes][2][banned]" id="visit_visitors_attributes_2_banned">
            Visitor is banned
            </label>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <h3 class="bold-medium push-top">Rejections verified by NOMIS</h3>
  <p>We have checked these rejection reasons in NOMIS and automatically ticked any that apply.</p>
  <div class="issue-with-prisoner">
    <div class="grid-row push-top">
      <div class="column-one-half">
        <div class="form-group">
          <div class="multiple-choice">
            <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_details_incorrect" value="prisoner_details_incorrect" class="js-Rejection js-restrictionOverride" data-override="prisoner-details-incorrect" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
            <label for="prisoner_details_incorrect">Prisoner details are incorrect</label>
          </div>
        </div>
        <div class="form-group">
          <div class="multiple-choice" data-target="allowance-dates">
            <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="no_allowance" value="no_allowance" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out" aria-controls="allowance-dates" aria-expanded="false">
            <label for="no_allowance">Prisoner does not have any visiting allowance</label>
          </div>
        </div>
        <div class="panel panel-border-narrow js-hidden" id="allowance-dates" aria-hidden="true">
          <div class="form-group">
            <fieldset>
              <legend>
                <span class="form-label-bold">
                  <span class="translation_missing" title="translation missing: en.prison.visits.rejection_nomis.allowance_renews_on">Allowance Renews On</span>
                </span>
              </legend>
              <div class="form-date">
                <div class="datefield form-group form-group-day">
                  <label for="visit_rejection_attributes_allowance_renews_on_day">Day</label>
                  <input min="1" max="31" class="form-control" aria-describedby="allowance_renews_on" name="visit[rejection_attributes][allowance_renews_on(3i)]" type="number" id="visit_rejection_attributes_allowance_renews_on_day">
                </div>
                <div class="datefield form-group form-group-month">
                  <label for="visit_rejection_attributes_allowance_renews_on_month">Month</label>
                  <input min="1" max="12" class="form-control" aria-describedby="allowance_renews_on" name="visit[rejection_attributes][allowance_renews_on(2i)]" type="number" id="visit_rejection_attributes_allowance_renews_on_month">
                </div>
                <div class="datefield form-group form-group-year">
                  <label for="visit_rejection_attributes_allowance_renews_on_year">Year</label>
                  <input min="2017" class="form-control" aria-describedby="allowance_renews_on" name="visit[rejection_attributes][allowance_renews_on(1i)]" type="number" id="visit_rejection_attributes_allowance_renews_on_year">
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
      <div class="column-one-half">
        <div class="form-group">
          <div class="multiple-choice">
            <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_banned" value="prisoner_banned" class="js-Rejection js-restrictionOverride" data-override="prisoner-banned" data-rejection-el="rejection-message" data-success-el="nomis-opt-out" checked="checked">
            <label for="prisoner_banned">Prisoner banned from receiving visits</label>
          </div>
        </div>
        <div class="form-group">
          <div class="multiple-choice">
            <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_out_of_prison" value="prisoner_out_of_prison" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
            <label for="prisoner_out_of_prison">Prisoner on external movement</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="notice push-top notification notification--grey" id="js-OverrideMessage">
    <i class="icon icon-important">
      <span class="visually-hidden">Warning</span>
    </i>
    <strong class="bold-small">
      You are overriding these restrictions:
      <ul class="list list-bullet font-small">
        <li id="prisoner-details-incorrect">Prisoner details are incorrect</li>
        <li id="prisoner-banned">Prisoner has been banned</li>
      </ul>
      Please update any incorrect restrictions in NOMIS.
    </strong>
  </div>

  <h3 class="bold-medium push-top">Other rejection reasons</h3>
  <p>Please check these details in NOMIS and tick any that apply.</p>
  <div class="grid-row">
    <div class="column-one-half">
      <div class="form-group">
        <div class="multiple-choice">
          <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_moved" value="prisoner_moved" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
          <label for="prisoner_moved">Prisoner has moved prisons</label>
        </div>
      </div>
      <div class="form-group">
        <div class="multiple-choice">
          <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="child_protection_issues" value="child_protection_issues" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
          <label for="child_protection_issues">Prisoner has child protection measures</label>
        </div>
      </div>
      <div class="form-group">
        <div class="multiple-choice">
          <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="duplicate_visit_request" value="duplicate_visit_request" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
          <label for="duplicate_visit_request">Duplicate visit request</label>
        </div>
      </div>
    </div>
    <div class="column-one-half">
      <div class="form-group">
        <div class="multiple-choice">
          <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_released" value="prisoner_released" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
          <label for="prisoner_released">Prisoner has been released</label>
        </div>
      </div>
      <div class="form-group">
        <div class="multiple-choice">
          <input type="checkbox" name="visit[rejection_attributes][reasons][]" id="prisoner_non_association" value="prisoner_non_association" class="js-Rejection" data-rejection-el="rejection-message" data-success-el="nomis-opt-out">
          <label for="prisoner_non_association">Prisoner has a non-association</label>
        </div>
      </div>
    </div>
  </div>

  <div class="grid-row push-top">
    <div class="column-two-thirds">
      <h2 class="bold-medium">Message (optional)</h2>

        <input value="5eba707f-b758-4c6c-8b75-7693a75ac821" type="hidden" name="message[user_id]" id="message_user_id">
        <label for="message_body" class="form-label">This message will be included in the email sent to the visitor.</label>
        <textarea class="form-control form-control-full-width" rows="4" name="message[body]" id="message_body"></textarea>
    </div>
  </div>

  <div class="push-top">
    <div id="rejection-message" aria-expanded="true" aria-hidden="false" style="display: block;">
      <div class="notice push-bottom">
        <i class="icon icon-information">
          <span class="visuallyhidden">Warning</span>
        </i>
        <strong class="bold-small">This visit will be rejected and an email will be sent to the lead visitor</strong>
      </div>
    </div>

    <div id="closed-visits" class="visually-hidden">
      <p class="bold-small">This is a closed visit.</p>
    </div>

    <div id="booktonomis-message" class="push-top visually-hidden" aria-expanded="false" aria-hidden="true" style="display: none;">
      <div class="grid-row">
        <div class="column-one-half">
          <div id="selected_slot_details" class="" aria-expanded="false" aria-hidden="true" style="display: none;">
            <div class="form-group">
              <label class="form-label" for="visit_reference_no">Reference number<span class="form-hint">eg Last 8 digits of VO number or “none” for remand</span></label>
              <input class="form-control" type="text" name="visit[reference_no]" id="visit_reference_no">
            </div>
            <div class="form-group">
              <div class="multiple-choice">
                <input name="visit[closed]" type="hidden" value="0">
                <input type="checkbox" value="1" name="visit[closed]" id="visit_closed">
                <label class="block-label" for="visit_closed"><span class="translation_missing" title="translation missing: en.prison.visits.book_to_nomis_opt_in.closed">Closed</span></label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <p><a class="js-LinkPreview" target="_blank" href="/en/prison/visits/2af39d03-f1b3-45c7-ac01-3cd3fcaa2df5/email_preview">Preview Email</a></p>
      <p><input type="submit" name="commit" value="Process" class="button button-primary" data-disable-with="Process"></p>
    </div>
  </div>

</form>
